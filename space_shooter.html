<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Space Shooter Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    background: black;
    font-family:"Segoe UI",sans-serif;
    overflow:hidden;
    color:white;
}
#gameScreen{
    width:100%;
    height:100vh;
    position:relative;
}
.back-btn{
    position:absolute;
    top:15px;
    left:15px;
    background:none;
    border:none;
    color:#60a5fa;
    font-size:16px;
    cursor:pointer;
    z-index:10;
}
.top-bar{
    position:absolute;
    top:15px;
    width:100%;
    display:flex;
    justify-content:center;
    gap:40px;
    font-weight:600;
    z-index:5;
}
canvas{
    display:block;
    margin:auto;
    background:black;
}
/* GAME OVER MODAL */
#gameOver{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.8);
    display:none;
    justify-content:center;
    align-items:center;
}
.modal{
    background:#111;
    padding:25px;
    border-radius:10px;
    border:2px solid #334155;
    text-align:center;
    width:280px;
}
</style>
</head>
<body>

<div id="gameScreen">

    <button class="back-btn" ><a href="arcadegallary.html">â¬… Back</a></button>

    <div class="top-bar">
        <div>Score: <span id="score">0</span></div>
        <div>Time: <span id="time">0</span>s</div>
    </div>

    <canvas id="gameCanvas" width="360" height="600"></canvas>

    <div id="gameOver">
        <div class="modal">
            <h2>Game Over</h2>
            <p>Score: <span id="finalScore"></span></p>
            <p>Time: <span id="finalTime"></span>s</p>
            <button onclick="goBack()">Back</button>
        </div>
    </div>

</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let score = 0;
let time = 0;
let gameLoop, timerLoop;

/* PLAYER SPACESHIP */
let player = {
    width: 40,
    height: 40,
    x: canvas.width/2 - 20,
    y: canvas.height - 60,
    speed: 6,
    color: "cyan"
};

/* BULLETS */
let bullets = [];

/* ENEMIES */
let enemies = [];

/* ================== START GAME ================== */
function startGame(){
    score = 0;
    time = 0;
    bullets = [];
    enemies = [];
    document.getElementById("score").textContent = score;
    document.getElementById("time").textContent = time;

    gameLoop = setInterval(updateGame, 20);
    timerLoop = setInterval(()=>{
        time++;
        document.getElementById("time").textContent = time;

        // spawn enemy randomly
        if(Math.random() < 0.03){
            enemies.push({
                x: Math.random() * (canvas.width-30) + 15,
                y: -40,
                width: 30,
                height: 30,
                dy: 2 + Math.random()*2,
                color: "red"
            });
        }

        if(time >= 60){
            endGame();
        }
    },1000);
}

startGame();

/* ================== GAME LOOP ================== */
function updateGame(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // draw player as triangle spaceship
    ctx.fillStyle = player.color;
    ctx.beginPath();
    ctx.moveTo(player.x + player.width/2, player.y);
    ctx.lineTo(player.x, player.y + player.height);
    ctx.lineTo(player.x + player.width, player.y + player.height);
    ctx.closePath();
    ctx.fill();

    // update bullets
    for(let i=bullets.length-1; i>=0; i--){
        let b = bullets[i];
        b.y -= b.dy;
        ctx.fillStyle = b.color;
        ctx.fillRect(b.x,b.y,b.width,b.height);

        // remove bullets off screen
        if(b.y + b.height < 0) bullets.splice(i,1);
    }

    // update enemies
    for(let i=enemies.length-1; i>=0; i--){
        let e = enemies[i];
        e.y += e.dy;

        ctx.fillStyle = e.color;
        ctx.fillRect(e.x, e.y, e.width, e.height);

        // collision with bullets
        for(let j=bullets.length-1; j>=0; j--){
            let b = bullets[j];
            if(b.x < e.x + e.width &&
               b.x + b.width > e.x &&
               b.y < e.y + e.height &&
               b.y + b.height > e.y){
                // destroy enemy
                enemies.splice(i,1);
                bullets.splice(j,1);
                score++;
                document.getElementById("score").textContent = score;
                break;
            }
        }

        // enemy reaches bottom (optional: reduce life)
        if(e.y + e.height > canvas.height){
            enemies.splice(i,1);
        }
    }
}

/* ================== CONTROLS ================== */
document.addEventListener("keydown", e=>{
    if(e.key === "ArrowLeft"){
        player.x -= player.speed;
        if(player.x < 0) player.x = 0;
    }
    if(e.key === "ArrowRight"){
        player.x += player.speed;
        if(player.x + player.width > canvas.width) player.x = canvas.width - player.width;
    }
    if(e.key === " "){
        // shoot bullet
        bullets.push({
            x: player.x + player.width/2 - 2,
            y: player.y - 10,
            width: 4,
            height: 10,
            dy: 6,
            color: "yellow"
        });
    }
});

/* ================== GAME OVER ================== */
function endGame(){
    clearInterval(gameLoop);
    clearInterval(timerLoop);
    document.getElementById("finalScore").textContent = score;
    document.getElementById("finalTime").textContent = time;
    document.getElementById("gameOver").style.display = "flex";
}

/* ================== BACK ================== */
function goBack(){
    window.location.href = "index.html";
}
</script>

</body>
</html>
