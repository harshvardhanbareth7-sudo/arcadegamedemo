<!--write a code in html+css+java for making snake game with following feature 

game place has a square box of almost 69% area of screen overall
game place has - stop/start button, resume/pause button, restart button in bottom which can be used by user by direct clicking or by shortcut key which is visibly written on it.
 snake is green in color and looks like a real snake only in start it's size is 1 box 
and when eats red ball which appear 77% times it's size grow by 1 box and  when eats yellow ball which appear 15% times it's size grow by 2 box and when eats blue ball which appear 8% times it's size grow by 5 box 
note at one time any one ball will only present not more than one
and on top current score, timer and best score present - score is based on snake length on box cover and timer is stop watch
and on top left back button 
when game ends a small window pop up which has time anbd current score and special message with fire cracker for new best score
try to make it professional and advance because i have to upload it-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Snake Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg-dark: #0f172a;
    --panel: #1e293b;
    --accent: #22c55e;
    --danger: #ef4444;
}

* {
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    margin: 0;
    background: radial-gradient(circle at top, #020617, #000);
    color: #fff;
    display: flex;
    justify-content: center;
    height: 100vh;
}

/* Main Container */
.container {
    width: 69vw;
    max-width: 900px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Top Bar */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--panel);
    padding: 10px 15px;
    border-radius: 8px;
}

.stats {
    display: flex;
    gap: 20px;
    font-weight: 600;
}

.back-btn {
    background: none;
    color: #60a5fa;
    border: none;
    cursor: pointer;
    font-size: 16px;
}

/* Game Board */
.game-wrapper {
    flex: 1;
    background: #020617;
    border-radius: 10px;
    padding: 10px;
    position: relative;
}

canvas {
    background: #020617;
    border: 2px solid #334155;
    border-radius: 6px;
}

/* Controls */
.controls {
    display: flex;
    justify-content: space-around;
    background: var(--panel);
    padding: 10px;
    border-radius: 8px;
}

.controls button {
    background: #020617;
    color: #fff;
    border: 1px solid #334155;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.2s;
}

.controls button:hover {
    background: #020617;
    border-color: var(--accent);
}

.controls span {
    display: block;
    font-size: 11px;
    opacity: 0.7;
}

/* Game Over Modal */
.modal {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: #020617;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    width: 300px;
    border: 2px solid #334155;
}

.fireworks {
    font-size: 30px;
    animation: pop 1s infinite alternate;
}

@keyframes pop {
    0% { transform: scale(1); }
    100% { transform: scale(1.3); }
}
</style>
</head>

<body>

<div class="container">
    <div class="top-bar">
        <button class="back-btn" ><a href="arcadegallary.html">â¬… Back</a></button>

        <div class="stats">
            <div>Score: <span id="score">1</span></div>
            <div>Time: <span id="time">00:00</span></div>
            <div>Best: <span id="best">0</span></div>
        </div>
    </div>

    <div class="game-wrapper">
        <canvas id="game" width="600" height="400"></canvas>

        <div class="modal" id="gameOver">
            <div class="modal-content">
                <h2>Game Over</h2>
                <p>Time: <span id="finalTime"></span></p>
                <p>Score: <span id="finalScore"></span></p>
                <div id="firework" class="fireworks" style="display:none;">ðŸŽ†ðŸŽ‡ðŸŽ†</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button onclick="toggleStart()">Start / Stop<span>S</span></button>
        <button onclick="togglePause()">Pause / Resume<span>P</span></button>
        <button onclick="restart()">Restart<span>R</span></button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const box = 20;

let snake, dir, food, running, paused;
let score = 1;
let timer = 0;
let interval, timerInterval;

const bestScoreEl = document.getElementById("best");
let bestScore = localStorage.getItem("bestScore") || 0;
bestScoreEl.textContent = bestScore;

function init() {
    snake = [{x: 5 * box, y: 5 * box}];
    dir = "RIGHT";
    score = 1;
    timer = 0;
    running = false;
    paused = false;
    food = spawnFood();
    document.getElementById("score").textContent = score;
    document.getElementById("time").textContent = "00:00";
    document.getElementById("gameOver").style.display = "none";
}

function spawnFood() {
    const r = Math.random() * 100;
    let type = "red", grow = 1;

    if (r > 92) { type = "blue"; grow = 5; }
    else if (r > 77) { type = "yellow"; grow = 2; }

    return {
        x: Math.floor(Math.random() * (canvas.width / box)) * box,
        y: Math.floor(Math.random() * (canvas.height / box)) * box,
        type,
        grow
    };
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Food
    ctx.fillStyle = food.type;
    ctx.beginPath();
    ctx.arc(food.x + box/2, food.y + box/2, box/2.2, 0, Math.PI*2);
    ctx.fill();

    // Snake
    snake.forEach((s,i)=>{
        ctx.fillStyle = i === 0 ? "#22c55e" : "#16a34a";
        ctx.fillRect(s.x, s.y, box, box);
    });

    let head = {...snake[0]};
    if (dir === "LEFT") head.x -= box;
    if (dir === "RIGHT") head.x += box;
    if (dir === "UP") head.y -= box;
    if (dir === "DOWN") head.y += box;

    if (
        head.x < 0 || head.y < 0 ||
        head.x >= canvas.width || head.y >= canvas.height ||
        snake.some(s => s.x === head.x && s.y === head.y)
    ) return gameOver();

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        score += food.grow;
        for(let i=1;i<food.grow;i++) snake.push({...snake[snake.length-1]});
        food = spawnFood();
        document.getElementById("score").textContent = score;
    } else {
        snake.pop();
    }
}

function toggleStart() {
    if (!running) {
        running = true;
        interval = setInterval(draw, 120);
        timerInterval = setInterval(updateTimer, 1000);
    } else {
        clearInterval(interval);
        clearInterval(timerInterval);
        running = false;
    }
}

function togglePause() {
    if (!running) return;
    paused = !paused;
    if (paused) {
        clearInterval(interval);
        clearInterval(timerInterval);
    } else {
        interval = setInterval(draw, 120);
        timerInterval = setInterval(updateTimer, 1000);
    }
}

function restart() {
    clearInterval(interval);
    clearInterval(timerInterval);
    init();
}

function updateTimer() {
    timer++;
    let m = String(Math.floor(timer / 60)).padStart(2,"0");
    let s = String(timer % 60).padStart(2,"0");
    document.getElementById("time").textContent = `${m}:${s}`;
}

function gameOver() {
    clearInterval(interval);
    clearInterval(timerInterval);
    running = false;

    document.getElementById("finalScore").textContent = score;
    document.getElementById("finalTime").textContent = document.getElementById("time").textContent;
    document.getElementById("gameOver").style.display = "flex";

    if (score > bestScore) {
        bestScore = score;
        localStorage.setItem("bestScore", bestScore);
        bestScoreEl.textContent = bestScore;
        document.getElementById("firework").style.display = "block";
    }
}

document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft" && dir !== "RIGHT") dir = "LEFT";
    if (e.key === "ArrowRight" && dir !== "LEFT") dir = "RIGHT";
    if (e.key === "ArrowUp" && dir !== "DOWN") dir = "UP";
    if (e.key === "ArrowDown" && dir !== "UP") dir = "DOWN";
    if (e.key.toLowerCase() === "s") toggleStart();
    if (e.key.toLowerCase() === "p") togglePause();
    if (e.key.toLowerCase() === "r") restart();
});

init();
</script>

</body>
</html>
